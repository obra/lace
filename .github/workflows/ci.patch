@@ jobs:
   test:
@@
-      - name: Run unit tests
-        if: matrix.test-group == 'unit'
-        run: |
-          script -q -c "npm run test:unit" /dev/null
+      - name: Run unit tests
+        if: matrix.test-group == 'unit'
+        run: |
+          if [[ "$RUNNER_OS" == "Linux" ]]; then
+            script -q -c "npm run test:unit" /dev/null
+          else
+            # macOS script: <flags> <output-file> <command>
+            script -q /dev/null npm run test:unit
+          fi
@@
-      - name: Run integration tests
-        if: matrix.test-group == 'integration'
-        run: |
-          script -q -c "npm run test:integration" /dev/null
+      - name: Run integration tests
+        if: matrix.test-group == 'integration'
+        run: |
+          if [[ "$RUNNER_OS" == "Linux" ]]; then
+            script -q -c "npm run test:integration" /dev/null
+          else
+            script -q /dev/null npm run test:integration
+          fi
@@
   test-coverage:
@@
-      - name: Run coverage
-        run: |
-          script -q -c "npm run test:coverage -- --exclude '**/*lmstudio-integration*' --exclude '**/*ollama-integration*' --exclude '**/e2e-cli*'" /dev/null
+      - name: Run coverage
+        run: |
+          COVER_CMD="npm run test:coverage -- --exclude '**/*lmstudio-integration*' \
+            --exclude '**/*ollama-integration*' --exclude '**/e2e-cli*'"
+          if [[ "$RUNNER_OS" == "Linux" ]]; then
+            script -q -c "$COVER_CMD" /dev/null
+          else
+            script -q /dev/null sh -c "$COVER_CMD"
+          fi
@@
   matrix-test:
@@
-      - name: Core tests
-        run: |
-          script -q -c "npm run test:run -- --exclude '**/*lmstudio-integration*' --exclude '**/*ollama-integration*' --exclude '**/e2e-cli*' --exclude '**/*sigint-integration*'" /dev/null
+      - name: Core tests
+        run: |
+          CORE_CMD="npm run test:run -- \
+            --exclude '**/*lmstudio-integration*' \
+            --exclude '**/*ollama-integration*' \
+            --exclude '**/e2e-cli*' \
+            --exclude '**/*sigint-integration*'"
+          if [[ "$RUNNER_OS" == "Linux" ]]; then
+            script -q -c "$CORE_CMD" /dev/null
+          else
+            script -q /dev/null sh -c "$CORE_CMD"
+          fi