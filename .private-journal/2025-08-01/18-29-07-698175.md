---
title: "6:29:07 PM - August 1, 2025"
date: 2025-08-01T22:29:07.698Z
timestamp: 1754087347698
---

## Project Notes

Found significant issues from the audit:

TESTS: 1 test failing in tool approval race conditions - likely related to event streaming changes that happened alongside type work.

LINTING: Major problems in packages/web/lib/event-stream-manager.ts:
- Multiple unused event types (TaskUpdatedEvent, TaskDeletedEvent, TaskNoteAddedEvent, AgentSpawnedEvent)
- Extensive use of `any` types throughout (35+ violations)
- Unsafe assignments and member access patterns

TYPE ORGANIZATION: After examining the current files:
- packages/web/types/web.ts exists with some organization but still has issues
- packages/web/types/api.ts still exists with duplicate Session/Agent interfaces (19-34)
- packages/web/lib/core.ts exists and looks properly structured
- Both api.ts and web.ts define Session interfaces - this is the duplication problem!

The implementation clearly went off-plan and created MORE type duplication rather than less. The event streaming work that happened concurrently introduced a lot of `any` types and unsafe patterns, violating our strict TypeScript rules.

Current state is WORSE than the original problem - we now have:
1. Duplicate Session/Agent interfaces in both api.ts and web.ts
2. A new event-stream-manager.ts file full of `any` types 
3. Test failures related to tool approval race conditions
4. Multiple unused type definitions

This confirms Jesse's assessment that the branch got derailed and made things worse.
