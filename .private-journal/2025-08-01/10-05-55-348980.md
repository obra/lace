---
title: "10:05:55 AM - August 1, 2025"
date: 2025-08-01T14:05:55.348Z
timestamp: 1754057155348
---

## Project Notes

Analysis of Bun test compatibility issues in Lace:

## Key Findings
1. **Vitest API Missing**: Bun's test runner doesn't have vi.mock(), vi.useFakeTimers(), etc. Need runtime detection or separate configs.

2. **Next.js Dependencies**: Major blocker - `next/server` and `server-only` packages not found. These are Node.js specific.

3. **Test Structure**: Current setup uses Vitest with jsdom environment. Bun has built-in test runner but different API.

## Iterative Path Forward
- Start with Bun's built-in test runner instead of trying to use Vitest
- Create runtime-agnostic test utilities
- Mock Next.js dependencies for Bun environment
- Focus on core business logic tests first, then UI tests

## Architecture Advantage
Lace's clean separation between core logic (CLI) and web interface means we can test core functionality with Bun while keeping Next.js tests in Node.js environment initially.

The web package being the entry point actually makes this easier - we can have dual build targets: Node.js (current) and Bun (new single binary).
