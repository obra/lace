---
title: "8:33:17 AM - September 5, 2025"
date: 2025-09-05T15:33:17.679Z
timestamp: 1757086397679
---

## Project Notes

Critical Architecture Discovery from Agent Analysis

Key finding: Sessions create MULTIPLE ToolExecutor instances (one per agent). This is the core issue:

Current pattern:
- Session creates ToolExecutor for coordinator agent
- Session creates separate ToolExecutor for each spawned agent  
- Each ToolExecutor initializes its own MCP connections
- Web APIs create yet more ToolExecutor instances

This leads to:
- Multiple connections to same MCP servers (resource waste)
- Configuration inconsistencies between instances
- MCP tools not appearing in configuration APIs

Agent findings show that Agents expect to receive ToolExecutor via constructor, they don't create their own. This means the fix should be at the Session level - create one properly configured ToolExecutor and share it.

Architecture should be:
Project: defines MCP config template
Session: creates single ToolExecutor with project+session MCP config  
Agent: uses shared session ToolExecutor
Web APIs: get ToolExecutor from session/project context, not create fresh ones
