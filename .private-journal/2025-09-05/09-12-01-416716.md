---
title: "9:12:01 AM - September 5, 2025"
date: 2025-09-05T16:12:01.416Z
timestamp: 1757088721416
---

## Project Notes

Critical Architecture Analysis - MCP Web API Design

The agent analysis confirms Jesse's assessment - the current MCP web API is fundamentally wrong. Key issues:

1. Security: Client-provided projectRoot paths bypass access controls
2. Architecture: Doesn't follow established project/session hierarchy  
3. Patterns: Inconsistent with existing API patterns
4. Context: No proper project/session context for MCP configuration
5. Lifecycle: No integration with resource cleanup

The correct approach should be:
- Project-scoped: /api/projects/$projectId/mcp/servers/
- Session-level overrides: /api/projects/$projectId/sessions/$sessionId/mcp/
- Proper inheritance through existing configuration schemas
- Context-aware ToolExecutor instances
- Resource lifecycle integration

This means we really do need to scrap the current web API implementation and rebuild it properly. The core MCP infrastructure can stay, but the web API layer needs complete redesign.
