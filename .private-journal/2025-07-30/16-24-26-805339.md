---
title: "4:24:26 PM - July 30, 2025"
date: 2025-07-30T20:24:26.805Z
timestamp: 1753907066805
---

## Project Notes

The issue is clear now. We have a proper ToolResult type:
```typescript
interface ToolResult {
  id?: string;
  content: ContentBlock[];
  isError: boolean;
  metadata?: Record<string, unknown>;
}
```

But the debug output shows we're only getting the `content` array: `[{ type: "text", text: "..." }]`

This means somewhere in the pipeline (probably timeline-converter.ts or the TOOL_AGGREGATED processing), we're extracting just the `content` field and losing the `isError` and other important fields.

I need to trace through:
1. Agent creates ToolResult 
2. ThreadManager stores it in TOOL_RESULT event
3. Timeline converter processes TOOL_AGGREGATED events
4. Component receives just the content array

The bug is likely in the TOOL_AGGREGATED processing where we're doing `result?.data` or similar and only extracting part of the ToolResult.
