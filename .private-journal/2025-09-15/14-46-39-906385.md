---
title: "2:46:39 PM - September 15, 2025"
date: 2025-09-15T21:46:39.906Z
timestamp: 1757972799906
---

## Project Notes

The Lace test suite has a comprehensive setup with test-setup.ts doing aggressive cleanup including vi.clearAllTimers() and global.gc(), but there are still gaps:

1. EventEmitter instances from Agent, TaskManager, etc. are not explicitly cleaned up in all tests
2. Some tests don't call session.destroy() consistently 
3. The setupCoreTest() utility is good but doesn't include EventEmitter cleanup
4. AbortController instances are created in test contexts but not explicitly cleaned up

The task-manager integration tests are particularly complex with multiple EventEmitter instances (Session, Agent, TaskManager) that could be causing the hanging.
