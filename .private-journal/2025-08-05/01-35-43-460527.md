---
title: "1:35:43 AM - August 5, 2025"
date: 2025-08-05T05:35:43.460Z
timestamp: 1754372143460
---

## Project Notes

Excellent progress on E2E test infrastructure cleanup:

**COMPLETED MAJOR WORK:**
1. ✅ Reorganized E2E structure into playwright-e2e/ and api-e2e/ 
2. ✅ Implemented server-per-file pattern for Playwright tests (fixed AwaiterOnce errors)
3. ✅ Fixed modal backdrop pointer interception issue in ProjectSelectorPanel
4. ✅ Added test IDs to UI components for reliable selection
5. ✅ Standardized API E2E tests to use persistence-helper.ts pattern
6. ✅ Updated all test utilities to handle auto-created sessions/agents
7. ✅ Fixed hash-routing-persistence.e2e.ts - 4/5 tests working consistently

**CURRENT STATUS:**
- hash-routing-persistence.e2e.ts: 4/5 tests pass (1 intermittent timing issue)
- web-ui.e2e.ts: Individual tests pass, but batch execution has timeout issues (infra working)
- tool-approval-modal.e2e.ts: Failing on project creation step (timing issue in createProjectWithProvider)

**KEY ARCHITECTURAL INSIGHTS:**
- System now auto-creates project → session → agent hierarchy automatically
- Tests need to expect URLs like: `#/project/{id}/session/{id}/agent/{id}`
- Server-per-file pattern works well, eliminates AwaiterOnce conflicts
- Test timing is critical - need proper waits for React hydration and modal logic
- Individual test reliability is good (~95%), batch execution has resource conflicts

**REMAINING WORK:**
- Fix timing issues in createProjectWithProvider function
- Address cross-test resource conflicts (lower priority)
- Extract minimal shared utilities if duplication exists

The infrastructure is now solid and most tests work reliably in isolation. Main patterns established.
